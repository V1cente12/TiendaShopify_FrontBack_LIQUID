void 0===Shopify.Cart&&(Shopify.Cart={}),Shopify.Cart.getCartShippingRates=function(e,t,a){a=a||Shopify.Cart.onError,jQuery.ajax({url:Shopify.root_url+"/cart/shipping_rates.json",type:"GET",data:$.param({shipping_address:e})}).done(function(a){t(a.shipping_rates,e)}).fail(function(e,t){a(e,t)})},Shopify.Cart.getShippingCart=function(e,t){$.ajax({type:"POST",url:Shopify.root_url+"/cart.js",data:{"attributes[theme_shipping]":JSON.stringify(t)},dataType:"json"});var a=$(".get__shipping"),r=$(".content__shipping"),n=$(".cartCost"),o=$(".cartCostTotal.plus_shipping"),s=$(".address__shipping");a.attr("data-curr-address",JSON.stringify(t));var i="";if("1"!==t.zip&&(i+=t.zip+", "),t.province!==t.country&&(i+=t.province+", "),i+=t.country,s.html(i).show(),$(".toggle_ship").show(),0==e.length)$('[data-tab-content="tab-floating-shipping"]').removeClass("has-data"),r.html('<td colspan="2"><div class="alert alert-danger" role="alert">There are no shipping methods available for your cart or destination.</div></td>');else{var d='<td class="item__shipping" colspan="2">';$.each(e,function(e,t){if(d+='<div class="item_shipp">',d+='<div class="item_shipp_name custom-control custom-radio">',d+='<input id="item_spp'+e+'" class="custom-control-input" type="radio" name="shipping-cart-drawer" data-name="'+t.code+'" value="'+t.price+'" placeholder=""',d+=0==e?'checked="checked">':">",d+='<label class="content-item__shipping custom-control-label" for="item_spp'+e+'">',d+='<span class="name-item__shipping">'+t.name,t.delivery_days.length>0?(d+='</span><span class="delivery_days-item__shipping"> (',t.delivery_days.length>=2?d+=t.delivery_days[0]+"-"+t.delivery_days[1]+" days)</span>":d+=t.delivery_days[0]+" day)</span>"):d+="</span>",d+="</label>",null!==t.delivery_date){d+='<div class="data-item__shipping"> Get by it ';var a=new Date(t.delivery_date);d+=a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),d+="</div>"}d+="</div>",d+='<div class="item_shipp_price">',d+='<span class="price-item__shipping">'+theme.Currency.formatMoney(100*t.price,theme.moneyFormat)+"</span>",d+="</div>",d+="</div>"}),d+="</td>",r.html(d).show()}r.css("opacity",""),$(".calculate__shipping").removeClass("loading"),$(".wrapper__shipping").removeClass("show"),$(".afterShip,.cartSubTotalWrap").show();var p=parseFloat(n.attr("data-price")),c=100*parseFloat(r.find('input[type="radio"][checked="checked"]').val());o.html(theme.Currency.formatMoney(p+c,theme.moneyFormat)),1==theme.function.multiCurrency&&null!==localStorageCurrency&&localStorageCurrency!==shopCry&&Kt_currency.convertAll(shopCry,localStorageCurrency),KT.drawResize()},Shopify.Cart.fullMessagesFromErrors=function(e){var t=[];return jQuery.each(e,function(e,a){jQuery.each(a,function(a,r){t.push(e+" "+r)})}),t},Shopify.Cart.onError=function(XMLHttpRequest,textStatus){var feedback="",data=eval("("+XMLHttpRequest.responseText+")");"Error : country is not supported."==(feedback=data.message?data.message+"("+data.status+"): "+data.description:"Error : "+Shopify.Cart.fullMessagesFromErrors(data).join("; ")+".")&&(feedback="We do not ship to this destination."),$(".content__shipping").html(feedback).show(),$(".calculate__shipping").addClass("error").removeClass("loading")},Shopify.Cart.alert=function(e,t,a){console.log(e)},Shopify.Cart.getCountry=function(){if("undefined"!=typeof Storage&&void 0!==sessionStorage.dataCountry)return $("#address_country").html(sessionStorage.dataCountry),void Shopify.Cart.buildCountry();jQuery.ajax({url:Shopify.root_url+"/cart?view=listcountry",type:"GET",dataType:"html",compvare:function(e,t){},success:function(e,t,a){$("#address_country").html(e),sessionStorage.dataCountry=e,Shopify.Cart.buildCountry()},error:function(e,t,a){}})},Shopify.Cart.buildCountry=function(){void 0!==$('[name="address[country]"]').attr("data-default")&&$('[name="address[country]"]').val($('[name="address[country]"] option[value="'+$('[name="address[country]"]').attr("data-default")+'"]').val());$('[name="address[country]"] option:selected').html();if("[]"!==(e=$('[name="address[country]"] option:selected').attr("data-provinces"))){var e=JSON.parse($('[name="address[country]"] option:selected').attr("data-provinces")),t=$('[name="address[province]"]').attr("data-default"),a="";$.each(e,function(e,r){void 0!==t&&r[0]==t?($('[data-select="#address__province"]').html(r[1]),a+='<option selected="selected" value="'+r[0]+'">'+r[1]+"</option>"):0==e?($('[data-select="#address__province"]').html(r[1]),a+='<option selected="selected" value="'+r[0]+'">'+r[1]+"</option>"):a+='<option value="'+r[0]+'">'+r[1]+"</option>"}),$('[name="address[province]"]').html(a).parent().show()}else $('[name="address[province]"]').html("").parent().hide(),$('[name="address[zip]"]').parent();if(void 0!==$(".get__shipping").attr("data-curr-address")){var r=JSON.parse($(".get__shipping").attr("data-curr-address"));Shopify.Cart.getCartShippingRates(r,Shopify.Cart.getShippingCart,Shopify.Cart.onError)}},$(document).on("change",'[name="address[country]"]',function(){var e=$('[name="address[country]"] option:selected').html(),t=$(this).find("option:selected").attr("data-provinces");if($(this).parent().find(".label_hidden_select").html(e),"[]"!==t){var t=JSON.parse($(this).find("option:selected").attr("data-provinces")),a=$('[name="address[province]"]').attr("data-default"),r="";$.each(t,function(e,t){void 0!==a&&t[0]==a?($('[data-select="#address__province"]').html(t[1]),r+='<option selected="selected" value="'+t[0]+'">'+t[1]+"</option>"):0==e?($('[data-select="#address__province"]').html(t[1]),r+='<option selected="selected" value="'+t[0]+'">'+t[1]+"</option>"):r+='<option value="'+t[0]+'">'+t[1]+"</option>"}),$('[name="address[province]"]').html(r).parent().show(),$('[name="address[zip]"]').val("").parent().show()}else $('[name="address[province]"]').html("").parent().hide(),$('[name="address[zip]"]').parent();KT.drawResize()}).on("change",'[name="address[province]"]',function(){var e=$('[name="address[province]"] option:selected').html();$(this).parent().find(".label_hidden_select").html(e),KT.drawResize()}).on("click",".calculate__shipping",function(){var e={zip:$('[name="address[zip]"]').val(),country:$('[name="address[country]"]').val(),province:null!==$('[name="address[province]"]').val()?$('[name="address[province]"]').val():$('[name="address[country]"]').val()};JSON.stringify(e)!==$(".get__shipping").attr("data-curr-address")?($(this).addClass("loading"),Shopify.Cart.getCartShippingRates(e,Shopify.Cart.getShippingCart,Shopify.Cart.onError)):$(".wrapper__shipping").removeClass("show")}).on("change",'[name="shipping-cart-drawer"]',function(){var e=parseFloat($(".cartCost").attr("data-price")),t=100*parseFloat($(this).val());$(".show__shipping-price").html(theme.Currency.formatMoney(t,theme.moneyFormat)),$(".cartCostTotal").html(theme.Currency.formatMoney(e+t,theme.moneyFormat)),1==theme.function.multiCurrency&&null!==localStorageCurrency&&localStorageCurrency!==shopCry&&Kt_currency.convertAll(shopCry,localStorageCurrency)}),document.addEventListener("DOMContentLoaded",function(e){$("#address_country").length>0&&$("body.template-cart").length>0&&("undefined"!=typeof Storage&&void 0!==sessionStorage.dataCountry?($("#address_country").html(sessionStorage.dataCountry),Shopify.Cart.buildCountry()):Shopify.Cart.getCountry())});