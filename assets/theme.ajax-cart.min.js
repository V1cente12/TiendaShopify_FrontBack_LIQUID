function attributeToString(t){return"string"!=typeof t&&"undefined"==(t+="")&&(t=""),jQuery.trim(t)}void 0===window.Shopify&&(window.Shopify={}),Shopify.KT_onError=function(e,t){$(".btn.loading, .kt-button.loading").removeClass("loading");var n=eval("("+e.responseText+")");n.message?theme.toast({title:"Error",message:n.message+"("+n.status+"): "+n.description+".",type:"error",duration:5e3}):theme.toast({title:"Error",message:Shopify.KT_fullMessagesFromErrors(n).join("; ")+".",type:"error",duration:5e3})},Shopify.KT_fullMessagesFromErrors=function(t){var e=[];return jQuery.each(t,function(t,a){jQuery.each(a,function(a,o){e.push(t+" "+o)})}),e},Shopify.KT_onCartUpdate=function(t,e){Shopify.KT_onCartUpdate_(t,e)},Shopify.KT_onCartShippingRatesUpdate=function(t,e){e.zip&&e.zip,e.province&&e.province,e.country},Shopify.KT_onItemAdded=function(t){Shopify.KT_getCart()},Shopify.KT_addItem=function(t,e,a){var o=t,e=e||1,r={type:"POST",url:Shopify.root_url+"/cart/add.js",data:"quantity="+e+"&id="+t,dataType:"json",success:function(t){"function"==typeof a?a(o,t):Shopify.KT_onItemAdded(t)},error:function(t,e){Shopify.KT_onError(t,e)}};jQuery.ajax(r)},Shopify.KT_addItems=function(t,e){var a={type:"POST",url:Shopify.root_url+"/cart/add.js",data:{items:t},dataType:"json",success:function(a){"function"==typeof e?e(t):Shopify.KT_onItemAdded(a)},error:function(t,e){Shopify.KT_onError(t,e)}};jQuery.ajax(a)},Shopify.KT_addItemFromForm=function(t,e){var a={type:"POST",url:Shopify.root_url+"/cart/add.js",data:jQuery("#"+t).serialize(),dataType:"json",success:function(t){"function"==typeof e?e(t):Shopify.KT_onItemAdded(t)},error:function(t,e){Shopify.KT_onError(t,e)}};jQuery.ajax(a)},Shopify.KT_addItemsFromForm=function(e){var a={type:"POST",url:Shopify.root_url+"/cart/update.js",data:$(e).serialize(),dataType:"json",success:function(e){"function"==typeof t?t(e):Shopify.KT_onCartUpdate(e)},error:function(t,e){Shopify.KT_onError(t,e)}};jQuery.ajax(a)},Shopify.KT_getCart=function(t){jQuery.getJSON(Shopify.root_url+"/cart.js",function(e,a){"function"==typeof t?t(e):Shopify.KT_onCartUpdate(e)})},Shopify.KT_changeItem=function(t,e,a){var o=t,r={type:"POST",url:Shopify.root_url+"/cart/change.js",data:"quantity="+e+"&id="+t,dataType:"json",success:function(t){"function"==typeof a?a(o,t):Shopify.KT_onCartUpdate(t)},error:function(t,e){Shopify.KT_onError(t,e)}};jQuery.ajax(r)},Shopify.KT_removeItem=function(t,e){var a=t,o={type:"POST",url:Shopify.root_url+"/cart/change.js",data:"quantity=0&id="+t,dataType:"json",success:function(t){"function"==typeof e?e(a,t,"remove item"):Shopify.KT_onCartUpdate(t,"remove item")},error:function(t,e){Shopify.KT_onError(t,e)}};jQuery.ajax(o)},Shopify.KT_clear=function(t){var e={type:"POST",url:Shopify.root_url+"/cart/clear.js",data:"",dataType:"json",success:function(e){"function"==typeof t?t(e):Shopify.KT_onCartUpdate(e)},error:function(t,e){Shopify.KT_onError(t,e)}};jQuery.ajax(e)},Shopify.KT_updateCartAttributes=function(t,e){var a="";jQuery.isArray(t)?jQuery.each(t,function(t,e){var o=attributeToString(e.key);""!==o&&(a+="attributes["+o+"]="+attributeToString(e.value)+"&")}):"object"==typeof t&&null!==t&&jQuery.each(t,function(t,e){a+="attributes["+attributeToString(t)+"]="+attributeToString(e)+"&"});var o={type:"POST",url:Shopify.root_url+"/cart/update.js",data:a,dataType:"json",success:function(t){"function"==typeof e?e(t):Shopify.KT_onCartUpdate(t)},error:function(t,e){Shopify.KT_onError(t,e)}};jQuery.ajax(o)},Shopify.KT_updateCartNote=function(t,e){var a={type:"POST",url:Shopify.root_url+"/cart/update.js",data:"note="+attributeToString(t),dataType:"json",success:function(t){"function"==typeof e?e(t):Shopify.KT_onCartUpdate(t),""!==t.note?$('[data-tab-content="tab-floating-note"]').addClass("has-data"):$('[data-tab-content="tab-floating-note"]').removeClass("has-data")},error:function(t,e){Shopify.KT_onError(t,e)}};jQuery.ajax(a)},Shopify.KT_updatedCartNote=function(t){$(".kt-button.loading").removeClass("loading"),$(".cart-drawer__content").removeClass("show-tab-floating"),$(".tab-floating-note").removeClass("show")},Shopify.KT_buildParams=function(t,e,a){jQuery.isArray(e)&&e.length?jQuery.each(e,function(e,o){rbracket.test(t)?a(t,o):Shopify.KT_buildParams(t+"["+("object"==typeof o||jQuery.isArray(o)?e:"")+"]",o,a)}):null!=e&&"object"==typeof e?Shopify.KT_isEmptyObject(e)?a(t,""):jQuery.each(e,function(e,o){Shopify.KT_buildParams(t+"["+e+"]",o,a)}):a(t,e)},Shopify.KT_isEmptyObject=function(t){for(var e in t)return!1;return!0},Shopify.KT_addGift=function(e){if($("[data-gift-auto-add]").length<=0)return!1;let a=JSON.parse($("[data-gift-auto-add]").html());if(!a&&!a.id)return!1;if(e.items.filter(t=>t.id==a.id).length){if(!(e.total_price<a.price_limit))return!1;Shopify.KT_removeItem(a.id)}if(!(e&&e.total_price>=a.price_limit))return!1;{let e={id:a.id,quantity:1};var o={type:"POST",url:Shopify.root_url+"/cart/add.js",data:e,dataType:"json",success:function(e){"function"==typeof t?t(e):Shopify.KT_onItemAdded(e)},error:function(t,e){Shopify.KT_onError(t,e)}};jQuery.ajax(o)}},$(document).on("click",".addItemAjax",function(t){t.preventDefault();var e=$(this),a=e.attr("data-vrid"),o=1,r=e.parents(".form-ajax--");e.addClass('disabled');e.find(".addItemAjax-text").attr("data-prev-text",e.find(".addItemAjax-text").text()).addClass("waitting-text-change"),r.length>0&&(r.find('[name="id"]').length>0&&(a=r.find('[name="id"]').val()),r.find('[name="quantity"]').length>0&&(o=r.find('[name="quantity"]').val())),Shopify.KT_addItem(a,o)}).on("click",".addItemsAjax",function(t){t.preventDefault(),$(this).addClass("loading"),Shopify.KT_addItemsFromForm(".addItemsAjaxFrom")}).on("click",".cart-drawer .remove-item",function(t){t.preventDefault(),$(this).parents(".item__cart").find("input").val(0).trigger("change")}).on("submit","#upadteCartNote",function(t){t.preventDefault(),$(this).find(".kt-button").addClass("loading"),Shopify.KT_updateCartNote($("#upadteCartNote").find('textarea[name="note"]').val(),Shopify.KT_updatedCartNote)}).on("submit","#upadteCartCoupon",function(t){t.preventDefault();var e=$("#upadteCartCheckout"),a=$(this).find('input[name="discount"]').val();e.find('input[name="discount"]').length>0?e.find('input[name="discount"]').val(a):e.append('<input type="hidden" name="discount" value="'+a+'">'),$.ajax({type:"POST",url:Shopify.root_url+"/cart.js",data:{"attributes[discount]":a},dataType:"json",success:function(t){$(".tab-floating-coupon").removeClass("show"),$(".cart-drawer__content").removeClass("show-tab-floating"),""==a?$('[data-tab-content="tab-floating-coupon"]').removeClass("has-data"):$('[data-tab-content="tab-floating-coupon"]').addClass("has-data")}})}).on("change","#gift-wrapping",function(t){t.preventDefault(),t.stopPropagation(),$(this).is(":checked")?$("#gift-wrap_product").val(1).trigger("change"):$("#gift-wrap_product").val(0).trigger("change")}).on("change","#upadteCartDrawer",function(t){t.preventDefault(),$(".content__cart-drawer").addClass("loading"),Shopify.KT_addItemsFromForm("#upadteCartDrawer")}),Shopify.KT_onCartUpdate_=function(t,e){if(0==window.location.pathname.indexOf(Shopify.root_url+"/cart"))return location.reload(),!1;if(0==Shopify.KT_addGift(t)){var a=$(".ajax__list-cart");$(".cartCount").text(t.item_count),$(".cartCost").attr("data-price",t.total_price).html(theme.Currency.formatMoney(t.items_subtotal_price,theme.moneyFormat)),t.items_subtotal_price!==t.total_price?$(".cartSubTotalWrap").show():$(".cartSubTotalWrap").hide(),$(".cartCostTotal").html(theme.Currency.formatMoney(t.total_price,theme.moneyFormat)),$(".title.has-item").html(1==t.item_count?theme.strings.cartItem.split("(")[0]+"("+t.item_count+" "+theme.strings.cartItemText+")"+theme.strings.cartItem.split(")")[1]:theme.strings.cartItems.split("(")[0]+"("+t.item_count+" "+theme.strings.cartItemsText+")"+theme.strings.cartItems.split(")")[1]),$(".btn.loading, .kt-button.loading").removeClass("loading"),$(".waitting-text-change").text(theme.strings.addedToCart),$(".mini-cart .icon-link").removeClass("load");if(!1===function(){var t=!1;return!1!==theme.function.sticky_icon_cart&&($(".cartCount:not(.fixed)").each(function(e,a){if(this.getBoundingClientRect().top>1&&(t=!0),a+1===$(".cartCount:not(.fixed)").length)return!1}),t)}()&&("drop"!==theme.function.type_ajax_cart&&"none"!==theme.function.type_ajax_cart||($("body").addClass("popIn"),anime({targets:".cartCount.fixed",keyframes:[{backgroundColor:"#fff",color:"#555",scale:1.25,rotate:-45,borderRadius:15},{backgroundColor:"#111",color:"#fff",scale:1,rotate:0,borderRadius:50}],duration:2e3,delay:100,easing:"easeOutElastic(1, .8)",compvare:function(t){$(".cartCount.fixed").removeAttr("style")}}))),"none"!==theme.function.type_ajax_cart){var o=Shopify.root_url+"/cart?view=listjsondrop";if("drawer"==theme.function.type_ajax_cart&&(o=Shopify.root_url+"/cart?view=listjson"),"popup"==theme.function.type_ajax_cart&&(o=Shopify.root_url+"/cart?view=listjsonpopup"),$("#address_country").length>0&&($("#address_country option").length<=0&&Shopify.Cart.getCountry(),void 0!==$(".get__shipping").attr("data-curr-address")&&t.item_count>0&&($(".get__shipping").show(),$("#address_country option").length>0))){var r=JSON.parse($(".get__shipping").attr("data-curr-address"));Shopify.Cart.getCartShippingRates(r,Shopify.Cart.getShippingCart,Shopify.Cart.onError)}$.ajax({type:"get",url:o,beforeSend:function(){e||"drawer"!=theme.function.type_ajax_cart||(theme.is_mobile?$(".close-qs").trigger("touchstart"):$(".close-qs").trigger("click")),t.item_count>0?$(".has-item").is(":hidden")&&($(".has-item").css({display:""}),$(".no-item").css({display:"none"})):$(".no-item").is(":hidden")&&($(".has-item").css({display:"none"}),$(".no-item").css({display:""})),$("#md_qvModal").length>0&&$("#md_qvModal").modal("hide"),$("#compare-modal").length>0&&$("#compare-modal").modal("hide"),$(".modalQuickShop").length>0&&$(".modalQuickShop").modal("hide"),$(".modalEditOpts").length>0&&$(".modalEditOpts").modal("hide")},success:function(o){$(".mini-cart").removeClass("load"),setTimeout(function(){$(".btn.adding").text(theme.strings.addToCart).removeClass("adding")},1e3);var r=o.split("\x3c!-- summary-discounts --\x3e");if(o=r[0],r[1]&&r[1].length>0?$(".summary-discounts").html(r[1]).removeClass("d-none"):$(".summary-discounts").html(r[1]).addClass("d-none"),a.html(o).removeClass("loading"),e||"drawer"!=theme.function.type_ajax_cart||KT.drawOpen(),e||"popup"!=theme.function.type_ajax_cart||KT.popupOpen(),$(".spendFreeShip").length>0){var n=$(".spendFreeShip"),i=parseInt(n.find("[aria-valuemax]").attr("aria-valuemax")),s=n.find(".progress-bar");i>t.total_price?(s.attr("aria-valuenow",i-t.total_price).css("width",t.total_price/i*100+"%").text(Math.round(t.total_price/i*100)+"%"),n.find(".text_progress .add_more_price").html(theme.function.threshold_cart.replace("#more",theme.Currency.formatMoney(i-t.total_price,theme.moneyFormat))),n.removeClass("congratulations")):(s.attr("aria-valuenow",i).css("width","100%").text("100%"),n.addClass("congratulations"))}$(".title-ajax__cart").html(1==t.item_count?theme.strings.cartItem.split("(")[0]+"("+t.item_count+" "+theme.strings.cartItemText+")"+theme.strings.cartItem.split(")")[1]:theme.strings.cartItems.split("(")[0]+"("+t.item_count+" "+theme.strings.cartItemsText+")"+theme.strings.cartItems.split(")")[1]),1==theme.function.multiCurrency&&null!==localStorageCurrency&&localStorageCurrency!==shopCry&&Kt_currency.convertAll(shopCry,localStorageCurrency),$(".content__cart-drawer.loading").removeClass("loading")}})}}};