window.theme=window.theme||{},theme.Filters=function(){function e(e){this.$container=$(e);var s=this;t=$(".kt_categories_filter").length>0?$(".kt_categories_filter")[0].innerText.replace(/(\r\n|\n|\r|\s\s)/gm,""):"",l=JSON.parse(document.getElementById("groupsFilters").innerHTML),i=l.settings.brands_icon.split(","),r=l.settings.color_groups.split(", "),a=l.blocks;this.$container=$(e);$.ajax({url:collection.url.indexOf("?")>=0?collection.url+"&view=alltag":collection.url+"?view=alltag",type:"GET",dataType:"html",cache:!0}).done(function(e){e.indexOf("ktjs")>=0&&$('[data-section-type="collection-filter"]').append(e.replace("ktjs","").replace(/(noscript\>)/gm,"script>"))}).fail(function(){console.log("error")}).always(function(){s._createFilter(),s._checkCatShowing()}),$(".kt--filter-js").on("click",".kt--filter-gr-i .layered_subtitle_heading",function(e){e.preventDefault(),$(this).parents(".kt--filter-gr-i").toggleClass("show")}).on("click",function(e){!1===$(e.target).is(".kt--filter-gr-i.kt--filter-dr *")&&$(".kt--filter-gr-i.kt--filter-dr").removeClass("show"),!1===$(e.target).is(".kt_dropdown .kt--filter-grs")&&$(".kt_dropdown .kt--filter-grs").slideUp()}).on("click",".filter-by.filterDrop",function(e){e.preventDefault(),$(this).toggleClass("opened"),$(".kt_dropdown .kt--filter-grs").is(":hidden")?$(".kt_dropdown .kt--filter-grs").slideDown("slow"):$(".kt_dropdown .kt--filter-grs").slideUp()}).on("click",".filter-by.filterCanvas",function(e){e.preventDefault(),$(".kt--filter.kt_canvas").addClass("opend-overlay"),$("body").css({overflow:"hidden",paddingRight:theme.getScrollbarWidth()}),$("#bg-overlay").addClass("filter-overlay").attr("data-box","filter-canvas")}).on("click",".filter-by.filterMobile, #filterApply, .headFilter .close",function(e){e.preventDefault(),$(".kt--filter.kt--filter-m").hasClass("show")?$(".kt--filter.kt--filter-m.show").removeClass("show"):$(".kt--filter.kt--filter-m").addClass("show")}).on("click",".widget_product_categories.market-layout .level-1:not(.opened)>a",function(e){if(e.preventDefault(),$(this).parent().hasClass("opened"))return!1;$(".widget_product_categories.market-layout .opened").removeClass("opened"),$(".widget_product_categories.market-layout .child_collection").slideUp(),$(this).parent().toggleClass("opened"),$(this).parent().find(".child_collection").slideToggle()})}var t,l,i,r,a,s={filterGroup:".kt--filter-grs",filterGroupDesktop:".kt--filter-grs-d",filterGroupMobile:".kt--filter-grs-m",filterLink:"a[data-pjax-filter]",catShowing:".child_collection li.current-cat"},o=$(s.filterGroupDesktop).data("toggle");return e.prototype=_.assignIn({},e.prototype,{_createFilter:function(){var e="",l=window.location.search,n=$("#sort_by").length?$("#sort_by li.selected a").attr("href").replace("?",""):void 0;if(l.indexOf("?sort_by=")>=0||l.indexOf("?page=")>=0||l.indexOf("?view=")>=0||l.indexOf("?q=")>=0?(l="?"+l.split("?")[1],currPage>1&&(l=l.replace("page="+currPage,"page=1"))):l="",_.forEach(a,function(a,s){var o="",n=new Array;if(a.new_row=a.new_row||!1,"kt_rencent"==a.key)a.new_row&&(o+='<div class="col-12 d-none d-lg-block clearfix"></div>'),o+='<div class="kt--filter-gr-i col-12 col-lg-'+a.block_width+" kt--filter-gr-i"+s+' widget widget_recent_product" style="display:none;">',o+='<ul class="list-unstyled"><li class="_"></li></ul></div>';else if("kt_banner"==a.key){if(null===a.img)return;a.new_row&&(o+='<div class="col-12 d-none d-lg-block clearfix"></div>'),o+='<div class="kt--filter-gr-i col-12 col-lg-'+a.block_width+" kt--filter-gr-i"+s+' widget widget_banner"><ul class="list-unstyled kt--filter-gr-i_ul pt-2i pt-lg-0i"><li class="_banner text-center" style="border: none"><div class="banner-effect1" style="position: relative"><a href="'+a.url+'" class="mb_0i"><img class="lazyload" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="'+a.img+'"></a></div></li></ul>',o+="</div>"}else if("kt_custom"==a.key)a.new_row&&(o+='<div class="col-12 d-none d-lg-block clearfix"></div>'),o+='<div class="kt--filter-gr-i col-12 col-lg-'+a.block_width+" kt--filter-gr-i"+s+' widget widget_custom">'+a.content+'<ul class="list-unstyled"><li class="_"></li></ul>',o+="</div>";else if("kt_categories"==a.key)a.new_row&&(o+='<div class="col-12 d-none d-lg-block clearfix"></div>'),o+='<div class="kt--filter-gr-i col-12 col-lg-'+a.block_width+" kt--filter-gr-i"+s+' widget widget_product_categories">'+t+'<ul class="list-unstyled m-0"><li class="_"></li></ul>',o+="</div>";else{if("kt_slider"==a.key)return;a.new_row&&(o+='<div class="col-12 d-none d-lg-block clearfix"></div>'),o+='<div class="kt--filter-gr-i col-12 col-lg-'+a.block_width+" kt--filter-gr-i"+s+" blockStyle_"+a.block_style+" split_"+a.use_split,o+=1==a.always_show?'">':' unshowAny">',o+='<div class="layered_subtitle_heading"><span class="layered_subtitle">'+a.title+'<span></span></span><span class="ico"><i class="fkt-angle-down" aria-hidden="true"></i></span></div>',o+='<ul class="kt--filter-gr-i_ul list-unstyled">';a.tags;if(a.tags.length>0)_.forEach(a.tags.split(", "),function(e,t){var s=-1;_.find(collectionTags,function(t){if(++s,_snakeCase(t)===_snakeCase(e)&&-1===o.indexOf("_"+_snakeCase(collectionTagsHandle[s].replace(a.key_+"-",""))+" kt")){var n=collectionTagsHandle[s];_snakeCase(n);o+='<li class="_'+n+" kt",_.indexOf(currTags_handleize,n)>=0&&(o+=" tagSelected"),iscollectionTags.length>0&&_.indexOf(iscollectionTags,t)<0&&(o+=" tagHidden"),o+='">',o+='<a class="custom-control custom-checkbox" data-pjax-filter="" href="',o+=Shopify.root_url,0==currTags_handleize.length?o+="/collections/"+collection.Crr+"/"+n+l:_.indexOf(currTags_handleize,n)>=0?(o+="/collections/"+collection.Crr+"/",_.forEach(currTags_handleize,function(e){n!==e&&(o+=e+"+")}),o+=l):(o+="/collections/"+collection.Crr+"/",_.forEach(currTags_handleize,function(e){t!==e&&(o+=e+"+")}),o+=n+l),o+='" title="'+t+'">',-1===r.indexOf(a.key)&&-1===r.indexOf(a.title)||(o+='<span class="color_pick swatch" data-color="'+n+'"></span>'),"6"!==a.block_style&&"7"!==a.block_style||_.forEach(i,function(e){-1===e.indexOf(_snakeCase(t.replace(a.key+" ","")))&&-1===_snakeCase(e).indexOf(_snakeCase(t.replace(a.key+" ","")))||(o+='<span class="brand_icon"><img src="',o+=e,o+='"></span>')}),o+='<span class="custom-control-label titleFilterItem">'+t.replace(a.key,"")+"</span>",o+="</a>",o+="</li>"}})});else{var c=-1;_.find(collectionTags,function(e){++c;var t=collectionTagsHandle[c],s=(_snakeCase(t),!1);if("all_tag"!==a.tags&&(0!==e.indexOf(a.key+" ")&&(s=!0),-1!==n.indexOf(t)&&(s=!0)),!s){n.push(t);t=collectionTagsHandle[c],_snakeCase(t);o+='<li class="_'+t.replace(a.key_+"-","")+" kt",_.indexOf(currTags_handleize,t)>=0&&(o+=" tagSelected"),iscollectionTags.length>0&&_.indexOf(iscollectionTags,e)<0&&(o+=" tagHidden"),o+='">',o+='<a class="custom-control custom-checkbox" data-pjax-filter="" href="',o+=Shopify.root_url,0==currTags_handleize.length?o+="/collections/"+collection.Crr+"/"+t+l:_.indexOf(currTags_handleize,t)>=0?(o+="/collections/"+collection.Crr+"/",_.forEach(currTags_handleize,function(e){t!==e&&(o+=e+"+")}),o+=l):(o+="/collections/"+collection.Crr+"/",_.forEach(currTags_handleize,function(e){t!==e&&(o+=e+"+")}),o+=t+l),o+='" title="'+e+'">',-1===r.indexOf(a.key)&&-1===r.indexOf(a.title)||(o+='<span class="color_pick swatch" data-color="'+t.replace(a.key_+" ","")+'"></span>'),"6"!==a.block_style&&"7"!==a.block_style||_.forEach(i,function(t){-1===t.indexOf(_snakeCase(e.replace(a.key+" ","")))&&-1===_snakeCase(t).indexOf(_snakeCase(e.replace(a.key+" ","")))||(o+='<span class="brand_icon"><img src="',o+=t,o+='"></span>')}),o+='<span class="custom-control-label titleFilterItem">'+e.replace(a.key+" ","")+"</span>",o+="</a>",o+="</li>"}})}o+="</ul>",o+="</div>"}-1!==o.indexOf('<li class="_')&&(e+=o)}),$(s.filterGroupDesktop).addClass("colFilter-"+$(e).length),$(window).width()>=992?($(s.filterGroupDesktop).html('<div class="d-flex flex-wrap">'+e+"</div>"),"show"==o&&($(s.filterGroupDesktop).find(".kt--filter-gr-i:not(.unshowAny)").addClass("showAny"),$(s.filterGroupDesktop).find(".kt--filter-gr-i.unshowAny").addClass("show"))):($(s.filterGroupMobile).html(e),"show"==o&&$(s.filterGroupMobile).find(".kt--filter-gr-i").addClass("show"),($(".kt--filter-grs .kt--filter-gr-i").last().hasClass("blockStyle_3")||$(".kt--filter-grs .kt--filter-gr-i").last().hasClass("blockStyle_6")||$(".kt--filter-grs .kt--filter-gr-i").last().hasClass("blockStyle_7"))&&$(".kt--filter-grs .kt--filter-gr-i").last().addClass("showAny"),$(".kt--filter-grs .kt--filter-gr-i").first().hasClass("widget_product_categories")&&$(".kt--filter-grs .kt--filter-gr-i").first().addClass("showAny")),$(".widget_recent_product").length>0){var c=localStorage.getItem("kt-recent")||"";if(null!==localStorage.getItem("kt-recent")){var d=c.split(",").reverse();$(".widget_recent_product").show().attr("data-include",firstPrd+"?q="+d.join("+")+"&view=recently-sidebar").addClass("lazyload")}}void 0!==typeof n&&_.forEach($("#sort_by a"),function(e,t){var i=$(e),r=i.attr("href").replace("?","");""!==l&&-1===l.indexOf("sort_by=")&&-1===l.indexOf(i.attr("href").replace("?",""))?i.attr("href",l+i.attr("href").replace("?","&")):""!==l&&-1!==l.indexOf("sort_by=")&&-1===l.indexOf(i.attr("href").replace("?",""))?i.attr("href",l.replace(n,r)):n==r&&i.attr("href",l)}),$("#filterApply").html($(".result-count").html()),$("#kt--filter-sl").html($(".kt--filter-wrap-sl").html()),$.each(currTags_handleize,function(e,t){if(0===t.indexOf("color-"))return $(".swatch-on-grid._"+t.replace("color-","")+" .swatch").trigger("click"),$(".swatch-on-grid._"+t.replace("color-","")+'[data-maybe-hide="true"]').attr("data-maybe-hide",!1),!0}),$(s.filterGroup).find(".tagSelected").length>0?$("#filterClear").show():$("#filterClear").hide()},_checkCatShowing:function(){$(s.catShowing).length>0&&$(s.catShowing).parents("li.level-1").addClass("showAny")},onUnload:function(){this.$container.off(),$(".kt--filter-js").off()}}),e}();