onmessage=function(a){function t(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function l(a){var t=(a=(a+"").toLowerCase()).replace(/'|"|\(|\)|\[|\]/g,"").replace(/[\s\x21-\x2f\x3a-\x40\x7b-\x7f^`\\[\]]+/g,"-").replace(/\W+/g,"-").replace(/^-+|-+$/g,"");return""==t?a:t}var s=a.data.rootUrl+"/products/"+a.data.handleProduct+"?view=jsfull",n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var a=JSON.parse(n.responseText.replace(/<!--.*?-->/g,"")),t={pId:a.id,pJson:a,html:o(a),variant:i(a)};postMessage(t)}else console.log("An error occurred during your request: "+n.status+" "+n.statusText)},n.open("Get",s),n.send();var i=function(t){var l=t.variants.find(function(a){return!0===a.available});return void 0===l&&(l=t.variants[0]),null!==a.data.currentVariant&&(l=t.variants.find(function(t){return t.id===parseInt(a.data.currentVariant)})),l},o=function(s){var n=s.options&&s.options[0]?s.options[0]:null,o="",e=[],p=[],r=s.options&&s.options[1]?s.options[1]:null,c="",d=[],u=s.options&&s.options[2]?s.options[2]:null,v="",_=[],g=a.data.prdOptsStyle,h=g.find(function(a){return a.name==n}),f=g.find(function(a){return a.name==r}),m=g.find(function(a){return a.name==u});console.log(h);var w=i(s);s.variants.forEach(function(s){var n=void 0!==h&&h.color_watched&&"image_variant"==h.sw_style?" bg-contain":"";if(-1===e.indexOf(s.option1)){e.push(s.option1);var i=-1!==w.options.indexOf(s.option1)?" active":"",g=e.length>5,y=l(s.option1),x=null!==(T=s.featured_image?s.featured_image.src:null)?T.split(".")[T.split(".").length-1]:null,O=null!==T&&void 0!==h&&h.color_watched&&"color"!==h.sw_style?"style=\"background-image: url('"+T.replace("."+x,"_100x100_crop_center."+x).replace(/http(s)?:/,"")+"')\"":"";""==y&&(y=s.option1),o+='<li class="swatch-on-grid _'+y+i+'" title="'+t(s.option1)+'" data-available="true" data-maybe-hide="'+g+'">',o+='<span class="swatch'+n+'" data-vrs="kt_'+y+'" data-opt="Opt1Js" data-vrid="'+s.id+'" data-view="/products/'+a.data.handleProduct+'" data-available="'+s.available+'" data-toggle="tooltip" data-placement="bottom" title="'+t(s.option1)+'"'+O+">",o+='<span class="swatch-title">'+s.option1+'</span><span class="comma">,</span>',o+="</span>",o+="</li>"}if(-1!==e.indexOf(w.options[0])&&(-1===p.indexOf(s.option1)&&p.push(s.option1),null!==r&&p[0]===s.option1&&-1===p.indexOf(s.option2)&&p.push(s.option2),null!==u&&p[1]===s.option2&&-1===p.indexOf(s.option3)&&p.push(s.option3)),null!==r&&-1===d.indexOf(s.option2)&&-1!==p.indexOf(s.option2)){d.push(s.option2);var b=-1!==w.options.indexOf(s.option2)?" active":"",J=d.length>5,k=l(s.option2);""==k&&(k=s.option2);var x=null!==(T=s.featured_image?s.featured_image.src:null)?T.split(".")[T.split(".").length-1]:null,O=null!==T&&void 0!==f&&f.color_watched&&"color"!==f.sw_style?"style=\"background-image: url('"+T.replace("."+x,"_100x100_crop_center."+x).replace(/http(s)?:/,"")+"')\"":"";c+='<li class="swatch-on-grid _'+k+b+'" title="'+s.option2+'" data-available="true" data-maybe-hide="'+J+'">',c+='<span class="swatch'+n+'" data-vrs="kt_'+k+'" data-opt="Opt2Js" data-vrid="'+s.id+'" data-view="/products/'+a.data.handleProduct+'" data-available="'+s.available+'" data-toggle="tooltip" data-placement="bottom" title="'+t(s.option2)+'"'+O+">",c+='<span class="swatch-title">'+s.option2+'</span><span class="comma">,</span>',c+="</span>",c+="</li>"}if(null!==u&&-1===_.indexOf(s.option3)&&-1!==p.indexOf(s.option3)){_.push(s.option3);var q=-1!==w.options.indexOf(s.option3)?" active":"",P=_.length>5,S=l(s.option3);""==S&&(S=s.option3);var T=s.featured_image?s.featured_image.src:null,x=null!==T?T.split(".")[T.split(".").length-1]:null,O=null!==T&&void 0!==m&&m.color_watched&&"color"!==m.sw_style?"style=\"background-image: url('"+T.replace("."+x,"_100x100_crop_center."+x).replace(/http(s)?:/,"")+"')\"":"";v+='<li class="swatch-on-grid _'+S+q+'" title="'+t(s.option3)+'" data-available="true" data-maybe-hide="'+P+'">',v+='<span class="swatch'+n+'" data-vrs="kt_'+S+'" data-opt="Opt3Js" data-vrid="'+s.id+'" data-view="/products/'+a.data.handleProduct+'" data-available="'+s.available+'" data-toggle="tooltip" data-placement="bottom" title="'+t(s.option3)+'"'+O+">",v+='<span class="swatch-title">'+s.option3+'</span><span class="comma">,</span>',v+="</span>",v+="</li>"}});var y='<li class="swatch-on-grid more kt_view_qs"><span class="swatch"><span class="swatch-title">'+a.data.moreText+"+</span></span> </li>";if(e.length>0)if(e.length>5&&(o+=y),void 0!==h){var x=1===e.length?" one-option":"";o='<ul class="product-loop-variants variants '+h.style+x+' list-unstyled" data-swatchesstyle="image_variant" data-usecolor="'+h.color_watched+'" data-opt="Opt1Js" data-n-opt="'+n+'"><li class="name_option">'+n+': <span class="n_selected">'+w.options[0]+'</span></li><li class="variants_list"><ul class="content__variants_list p-0">'+o+"</li></ul></ul>"}else o='<ul class="product-loop-variants variants list list_1 list-unstyled" data-swatchesstyle="image_variant" data-usecolor="false" data-opt="Opt1Js" data-n-opt="'+n+'"><li class="name_option">'+n+':</li><li class="variants_list"><ul class="content__variants_list p-0">'+o+"</li></ul></ul>";if(d.length>0)if(d.length>5&&(c+=y),void 0!==f){var O=1===d.length?" one-option":"";c='<ul class="product-loop-variants variants '+f.style+O+' list-unstyled" data-swatchesstyle="image_variant" data-usecolor="'+f.color_watched+'" data-opt="Opt2Js" data-n-opt="'+r+'"><li class="name_option">'+r+': <span class="n_selected">'+w.options[1]+'</span></li><li class="variants_list"><ul class="content__variants_list p-0">'+c+"</li></ul></ul>"}else c='<ul class="product-loop-variants variants list list_1 list-unstyled" data-swatchesstyle="image_variant" data-usecolor="false" data-opt="Opt2Js" data-n-opt="'+r+'"><li class="name_option">'+r+':</li><li class="variants_list"><ul class="content__variants_list p-0">'+c+"</li></ul></ul>";if(_.length>0)if(_.length>5&&(v+=y),void 0!==m){var b=1===d.length?" one-option":"";v='<ul class="product-loop-variants variants '+m.style+b+' list-unstyled" data-swatchesstyle="image_variant" data-usecolor="'+m.color_watched+'" data-opt="Opt3Js" data-n-opt="'+u+'"><li class="name_option">'+u+': <span class="n_selected">'+w.options[2]+'</span></li><li class="variants_list"><ul class="content__variants_list p-0">'+v+"</li></ul></ul>"}else v='<ul class="product-loop-variants variants list list_1 list-unstyled" data-swatchesstyle="image_variant" data-usecolor="false" data-opt="Opt3Js" data-n-opt="'+u+'"><li class="name_option">'+u+':</li><li class="variants_list"><ul class="content__variants_list p-0">'+v+"</li></ul></ul>";var J='<input type="hidden" name="quantity" value="1"><input type="hidden" name="id" value="'+w.id+'">';return options={option1:o,option2:c,option3:v,input:J}}};