window.theme=window.theme||{},theme.Filters=function(){function e(e){this.$container=$(e);var s=this;l=$(".kt_categories_filter").length>0?$(".kt_categories_filter")[0].innerText.replace(/(\r\n|\n|\r|\s\s)/gm,""):"",t=JSON.parse(document.getElementById("groupsFilters").innerHTML),i=t.settings.brands_icon.split(","),a=t.settings.color_groups.split(", "),r=t.blocks;this.$container=$(e);var n=window.location.search.indexOf("/collections/")>=0?window.location.search:collection.url+window.location.search;n=n.replace("&oseid=","kiti=").replace("?oseid=","kiti=").split("kiti=")[0],$.ajax({url:n.indexOf("?")>=0?n+"&view=multi_flts_or":n+"?view=multi_flts_or",type:"GET",dataType:"html",cache:!0}).done(function(e){e.indexOf("ktjs")>=0&&0!==e.indexOf("\x3c!--flt_or--\x3e")&&($(".pagination_").html(e.split("\x3c!--flt_or--\x3e")[2].replace(/(noscript\>)/gm,"script>")),$(".result-count").html(e.split("\x3c!--flt_or--\x3e")[1]),$('.kt--filter-js a[data-action="infinity"]').length>0&&0==$('.kt--filter-js a[data-action="infinity"]').hasClass("listened")&&$(window).scroll($.throttle(250,theme.CollSection.infinityLoad)))}).fail(function(){console.log("error")}).always(function(){s._createFilter(),s._checkCatShowing()}),$(".kt--filter-js").on("click",".kt--filter-gr-i .layered_subtitle_heading",function(e){e.preventDefault(),$(this).parents(".kt--filter-gr-i").toggleClass("show")}).on("click",function(e){!1===$(e.target).is(".kt--filter-gr-i.kt--filter-dr *")&&$(".kt--filter-gr-i.kt--filter-dr").removeClass("show"),!1===$(e.target).is(".kt_dropdown .kt--filter-grs")&&$(".kt_dropdown .kt--filter-grs").slideUp()}).on("click",".filter-by.filterDrop",function(e){e.preventDefault(),$(this).toggleClass("opened"),$(".kt_dropdown .kt--filter-grs").is(":hidden")?$(".kt_dropdown .kt--filter-grs").slideDown("slow"):$(".kt_dropdown .kt--filter-grs").slideUp()}).on("click",".filter-by.filterCanvas",function(e){e.preventDefault(),$(".kt--filter.kt_canvas").addClass("opend-overlay"),$("body").css({overflow:"hidden",paddingRight:theme.getScrollbarWidth()}),$("#bg-overlay").addClass("filter-overlay").attr("data-box","filter-canvas")}).on("click",".filter-by.filterMobile, #filterApply, .headFilter .close",function(e){e.preventDefault(),$(".kt--filter.kt--filter-m").hasClass("show")?$(".kt--filter.kt--filter-m.show").removeClass("show"):$(".kt--filter.kt--filter-m").addClass("show")}).on("click",".widget_product_categories.market-layout .level-1:not(.opened)>a",function(e){if(e.preventDefault(),$(this).parent().hasClass("opened"))return!1;$(".widget_product_categories.market-layout .opened").removeClass("opened"),$(".widget_product_categories.market-layout .child_collection").slideUp(),$(this).parent().toggleClass("opened"),$(this).parent().find(".child_collection").slideToggle()})}var l,t,i,a,r,s={filterGroup:".kt--filter-grs",filterGroupDesktop:".kt--filter-grs-d",filterGroupMobile:".kt--filter-grs-m",filterLink:"a[data-pjax-filter]",catShowing:".child_collection li.current-cat"},n=$(s.filterGroupDesktop).data("toggle");return e.prototype=_.assignIn({},e.prototype,{_get_tags_from_url:function(e){return null!==e.match(/[^\+\=]+\w+\:.*?(\&|$)/g)?e.match(/[^\+\=]+\w+\:.*?(\&|$)/g)[0].replace(/(\&*)$/g,""):e},_build_tags_url:function(e){var l=new Array;for(var t in e)e[t].length>0&&l.push(t+":"+e[t].join(","));return l.join("+")},_createFilter:function(){var e=this,t="",o=new Array,c=window.location.search,d=$("#sort_by").length?$("#sort_by li.selected a").attr("href").replace("?",""):void 0;-1==c.indexOf("q=")&&-1==c.indexOf("?")?c="?q=":-1==c.indexOf("q=")&&(c+="&q=");var f=[],p={};if(_.forEach(currTags_handleize,function(e,l){if(""!==e){var t=e.split(":"),i=t[1].split(",");p[t[0]]=i,_.forEach(i,function(e,l){var i=t[0]+"-"+e;f.push(i)})}}),_.forEach(r,function(r,s){var n="",d=new Array;if(r.new_row=r.new_row||!1,"kt_rencent"==r.key)r.new_row&&(n+='<div class="col-12 d-none d-lg-block clearfix"></div>'),n+='<div class="kt--filter-gr-i col-12 col-lg-'+r.block_width+" kt--filter-gr-i"+s+' widget widget_recent_product" style="display:none;">',n+='<ul class="list-unstyled"><li class="_"></li></ul></div>';else if("kt_banner"==r.key){if(null===r.img)return;r.new_row&&(n+='<div class="col-12 d-none d-lg-block clearfix"></div>'),n+='<div class="kt--filter-gr-i col-12 col-lg-'+r.block_width+" kt--filter-gr-i"+s+' widget widget_banner"><ul class="kt--filter-gr-i_ul list-unstyled pt-2i pt-lg-0i"><li class="_banner text-center" style="border: none"><div class="banner-effect1" style="position: relative"><a href="'+r.url+'" class="mb_0i"><img class="lazyload" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="'+r.img+'"></a></div></li></ul>',n+="</div>"}else if("kt_custom"==r.key)r.new_row&&(n+='<div class="col-12 d-none d-lg-block clearfix"></div>'),n+='<div class="kt--filter-gr-i col-12 col-lg-'+r.block_width+" kt--filter-gr-i"+s+' widget widget_custom">'+r.content+'<ul class="list-unstyled"><li class="_"></li></ul>',n+="</div>";else if("kt_categories"==r.key)r.new_row&&(n+='<div class="col-12 d-none d-lg-block clearfix"></div>'),n+='<div class="kt--filter-gr-i col-12 col-lg-'+r.block_width+" kt--filter-gr-i"+s+' widget widget_product_categories">'+l+'<ul class="list-unstyled m-0"><li class="_"></li></ul>',n+="</div>";else if("kt_slider"==r.key){if("price"==r.option&&fltSlider.mipr==fltSlider.mapr)return;if("weight"==r.option&&fltSlider.miw==fltSlider.maw)return;r.new_row&&(n+='<div class="col-12 d-none d-lg-block clearfix"></div>'),n+='<div class="kt--filter-gr-i col-12 col-lg-'+r.block_width+" kt--filter-gr-i"+s+' widget widget_flt_slider">',n+='<div class="layered_subtitle_heading"><span class="layered_subtitle">'+r.title+'<span></span></span><span class="ico"><i class="fkt-angle-down" aria-hidden="true"></i></span></div>',n+='<ul class="kt--filter-gr-i_ul list-unstyled"><li class="_"></li>',n+='<li class="ui-slider" data-option="'+r.option+'" data-step="'+r.step+'" data-unit="'+r.unit+'">',n+='<div class="slider-range"></div>',n+='<div class="d-flex align-items-center justify-content-between mt-2">',n+='<div class="">',n+='<label for="amount">'+theme.strings.flt_range+":</label>",n+='<div class="amount"></div>',n+="</div>",n+='<div><a data-pjax-filter href="?q=" class="btn-flt btn btn-minwidth-sm btn-outline-darker mb-0i">Filter</a></div>',n+="</div>",n+="</li>",n+="</ul>",n+="</div>"}else if("kt_truthy"==r.key){r.new_row&&(n+='<div class="col-12 d-none d-lg-block clearfix"></div>'),n+='<div class="kt--filter-gr-i col-12 col-lg-'+r.block_width+" kt--filter-gr-i"+s+" blockStyle_"+r.block_style+'">',n+='<div class="layered_subtitle_heading"><span class="layered_subtitle">'+r.title+'<span></span></span><span class="ico"><i class="fkt-angle-down" aria-hidden="true"></i></span></div>',n+='<ul class="kt--filter-gr-i_ul list-unstyled">',r.tags=r.val+"-true";var u=-1,k=null;_.find(collectionTags,function(l){if(++u,_snakeCase(l)===_snakeCase(r.tags)&&-1===n.indexOf("_true kt")){var t=r.val+"-true";n+='<li class="_true kt ',(_.indexOf(f,t)>=0||f.includes("nkey-"+t))&&(n+="tagSelected"),iscollectionTags.length>0&&_.indexOf(iscollectionTags,l)<0&&(n+="tagHidden"),n+='">',n+='<a class="custom-control custom-checkbox" data-pjax-filter="" href="',n+=Shopify.root_url,null!=(k=JSON.parse(JSON.stringify(p)))[r.val]?_.indexOf(k[r.val],"true")>=0?k[r.val].splice(_.indexOf(k[r.val],"true"),1):k[r.val].push("true"):(k[r.val]=[],k[r.val].push("true")),n+="collection"!==templateName?allPrdUrl:"";var i=f.length>0?c.replace(e._get_tags_from_url(c),e._build_tags_url(k)):c+e._build_tags_url(k);if(n+=i,_.indexOf(f,r.val+"-"+t)>=0){var a=[l.replace(r.key+" ",""),i];o.push(a)}return n+='" title="'+l+'">',n+='<span class="custom-control-label titleFilterItem">'+r.label+"</span>",n+="</a>",n+="</li>",!0}}),n+="</ul>",n+="</div>"}else{r.new_row&&(n+='<div class="col-12 d-none d-lg-block clearfix"></div>'),n+='<div class="kt--filter-gr-i col-12 col-lg-'+r.block_width+" kt--filter-gr-i"+s+" blockStyle_"+r.block_style+" split_"+r.use_split,n+=1==r.always_show?'">':' unshowAny">',n+='<div class="layered_subtitle_heading"><span class="layered_subtitle">'+r.title+'<span></span></span><span class="ico"><i class="fkt-angle-down" aria-hidden="true"></i></span></div>',n+='<ul class="kt--filter-gr-i_ul list-unstyled">';r.tags;if(r.tags.length>0&&"all_tag"!==r.tags)_.forEach(r.tags.split(", "),function(l,t){var s=-1,d=null;_.find(collectionTags,function(t){if(++s,_snakeCase(t)===_snakeCase(l)&&-1===n.indexOf("_"+_snakeCase(collectionTagsHandle[s].replace(r.key_+"-",""))+" kt")){var u=collectionTagsHandle[s];_snakeCase(u);n+='<li class="_'+u.replace(r.key_+"-","")+" kt ",(_.indexOf(f,u)>=0||f.includes("nkey-"+u))&&(n+="tagSelected"),iscollectionTags.length>0&&_.indexOf(iscollectionTags,t)<0&&(n+="tagHidden"),n+='">',n+='<a class="custom-control custom-checkbox" data-pjax-filter="" href="',n+=""!=Shopify.root_url?collection.url:"",void 0!=(d=JSON.parse(JSON.stringify(p)))[_handleize(r.key)]&&_.indexOf(d[_handleize(r.key)],_handleize(t.replace(r.key,"")))>=0?d[_handleize(r.key)].splice(_.indexOf(d[_handleize(r.key)],_handleize(t.replace(r.key,""))),1):void 0!=d[_handleize(r.key)]?d[_handleize(r.key)].push(_handleize(t.replace(r.key,""))):null!=d.nkey&&""===r.key?_.indexOf(d.nkey,_handleize(t))>=0?d.nkey.splice(_.indexOf(d.nkey,_handleize(t)),1):d.nkey.push(_handleize(t.replace(r.key,""))):(d[_handleize(r.key)||"nkey"]=[],d[_handleize(r.key)||"nkey"].push(_handleize(t.replace(r.key,"")))),n+="collection"!==templateName?allPrdUrl:"";var k=f.length>0?c.replace(e._get_tags_from_url(c),e._build_tags_url(d)):c+e._build_tags_url(d);if(n+=k,_.indexOf(f,u)>=0||_.indexOf(f,"nkey-"+u)>=0){var g=[t.replace(r.key+" ",""),k];o.push(g)}return n+='" title="'+t+'">',-1===a.indexOf(r.key)&&-1===a.indexOf(r.title)||(n+='<span class="color_pick swatch" data-color="'+u+'"></span>'),"6"!==r.block_style&&"7"!==r.block_style||_.forEach(i,function(e){-1===e.indexOf(_snakeCase(t.replace(r.key+" ","")))&&-1===_snakeCase(e).indexOf(_snakeCase(t.replace(r.key+" ","")))||(n+='<span class="brand_icon"><img src="',n+=e,n+='"></span>')}),n+='<span class="custom-control-label titleFilterItem">'+t.replace(r.key,"")+"</span>",n+="</a>",n+="</li>",!0}})});else{u=-1;_.find(collectionTags,function(l){var t=null;++u;var s=collectionTagsHandle[u],k=(_snakeCase(s),!1);if("all_tag"!==r.tags&&(0!==l.indexOf(r.key+" ")&&(k=!0),-1!==d.indexOf(s)&&(k=!0)),!k){d.push(s),n+='<li class="_'+s.replace(r.key_+"-","")+" ",(_.indexOf(f,s)>=0||f.includes("nkey-"+s))&&(n+=" tagSelected"),iscollectionTags.length>0&&_.indexOf(iscollectionTags,l)<0&&(n+=" tagHidden"),n+='">',n+='<a class="custom-control custom-checkbox" data-pjax-filter="" href="',n+=""!=Shopify.root_url?collection.url:"",void 0!=(t=JSON.parse(JSON.stringify(p)))[_handleize(r.key)]&&_.indexOf(t[_handleize(r.key)],_handleize(l.replace(r.key,"")))>=0?t[_handleize(r.key)].splice(_.indexOf(t[_handleize(r.key)],_handleize(l.replace(r.key,""))),1):void 0!=t[_handleize(r.key)]?t[_handleize(r.key)].push(_handleize(l.replace(r.key,""))):null!=t.nkey&&""===r.key?_.indexOf(t.nkey,_handleize(l))>=0?t.nkey.splice(_.indexOf(t.nkey,_handleize(l)),1):t.nkey.push(_handleize(l.replace(r.key,""))):(t[_handleize(r.key)||"nkey"]=[],t[_handleize(r.key)||"nkey"].push(_handleize(l.replace(r.key,"")))),n+="collection"!==templateName?allPrdUrl:"";var g=f.length>0?c.replace(e._get_tags_from_url(c),e._build_tags_url(t)):c+e._build_tags_url(t);if(n+=g,_.indexOf(f,s)>=0||_.indexOf(f,"nkey-"+s)>=0){var h=[l.replace(r.key+" ",""),g];o.push(h)}n+='" title="'+l+'">',-1===a.indexOf(r.key)&&-1===a.indexOf(r.title)||(n+='<span class="color_pick swatch" data-color="'+s+'"></span>'),"6"!==r.block_style&&"7"!==r.block_style||_.forEach(i,function(e){-1===e.indexOf(_snakeCase(l.replace(r.key+" ","")))&&-1===_snakeCase(e).indexOf(_snakeCase(l.replace(r.key+" ","")))||(n+='<span class="brand_icon"><img src="',n+=e,n+='"></span>')});var y=l.replace(r.key+"  ","").replace(r.key+" ","");n+='<span class="custom-control-label titleFilterItem">'+y+"</span>",n+="</a>",n+="</li>"}})}n+="</ul>",n+="</div>"}-1!==n.indexOf('<li class="_')&&(t+=n)}),$(s.filterGroupDesktop).addClass("colFilter-"+$(t).length),$(window).width()>=992?($(s.filterGroupDesktop).html('<div class="d-flex flex-wrap">'+t+"</div>"),"show"==n&&($(s.filterGroupDesktop).find(".kt--filter-gr-i:not(.unshowAny)").addClass("showAny"),$(s.filterGroupDesktop).find(".kt--filter-gr-i.unshowAny").addClass("show"))):($(s.filterGroupMobile).html(t),"show"==n&&$(s.filterGroupMobile).find(".kt--filter-gr-i").addClass("show"),($(".kt--filter-grs .kt--filter-gr-i").last().hasClass("blockStyle_3")||$(".kt--filter-grs .kt--filter-gr-i").last().hasClass("blockStyle_6")||$(".kt--filter-grs .kt--filter-gr-i").last().hasClass("blockStyle_7"))&&$(".kt--filter-grs .kt--filter-gr-i").last().addClass("showAny"),$(".kt--filter-grs .kt--filter-gr-i").first().hasClass("widget_product_categories")&&$(".kt--filter-grs .kt--filter-gr-i").first().addClass("showAny"),$(".kt--filter-gr-i.widget_flt_slider").addClass("showAny")),$(".widget_flt_slider").length>0&&$.each($(".slider-range"),function(e,l){var t=$(this),i=$(this).parents(".ui-slider"),a=i.find(".btn-flt");if("price"==i.data("option")){var r=c.replace(/(mipr|mapr)\_.*?\w+/g,"").replace(/(\+\+|\+$)/g,"").replace(/\=\+/g,"="),s=fltSlider.mipr,n=fltSlider.mapr,o=fltSlider.mipr_crr,d=fltSlider.mapr_crr,f=i.data("step")||1;n%f!=n/f&&(d==n&&(d=n+f),n+=f),t.slider({range:!0,min:s,max:n,values:[o,d],step:f,isRTL:dirBody,slide:function(e,l){if(i.find(".amount").html(theme.Currency.formatMoney(l.values[0],theme.moneyFormat)+"&nbsp;-&nbsp;"+theme.Currency.formatMoney(l.values[1],theme.moneyFormat)),l.values[1]!=n&&l.values[0]==s)t=r.replace("q=","q=mapr_"+l.values[1]+"+");else if(l.values[1]==n&&l.values[0]!=s)t=r.replace("q=","q=mipr_"+l.values[0]+"+");else var t=r.replace("q=","q=mipr_"+l.values[0]+"+mapr_"+l.values[1]+"+");a.attr("href",t)}}),i.find(".amount").html(theme.Currency.formatMoney(t.slider("values",0),theme.moneyFormat)+"&nbsp;-&nbsp;"+theme.Currency.formatMoney(t.slider("values",1),theme.moneyFormat)),a.attr("href",r.replace("q=","q=mipr_"+t.slider("values",0)+"+mapr_"+t.slider("values",1)+"+"))}if("weight"==i.data("option")){var r=c.replace(/(miw|maw)\_.*?\w+/g,"").replace(/(\+\+|\+$)/g,"").replace(/\=\+/g,"="),s=fltSlider.miw,n=fltSlider.maw,o=fltSlider.wmin_crr,d=fltSlider.wmax_crr,f=i.data("step")||1,_=i.data("unit")||"g";n%f!=n/f&&(d==n&&(d=n+f),n+=f),t.slider({range:!0,min:s,max:n,values:[o,d],step:f,isRTL:dirBody,slide:function(e,l){if(i.find(".amount").html("<span>"+l.values[0]+_+"</span>&nbsp;-&nbsp;<span>"+l.values[1]+_+"</span>"),l.values[1]!=n&&l.values[0]==s)t=r.replace("q=","q=maw_"+l.values[1]+"+");else if(l.values[1]==n&&l.values[0]!=s)t=r.replace("q=","q=miw_"+l.values[0]+"+");else var t=r.replace("q=","q=miw_"+l.values[0]+"+maw_"+l.values[1]+"+");a.attr("href",t)}}),i.find(".amount").html("<span>"+t.slider("values",0)+_+"</span>&nbsp;-&nbsp;<span>"+t.slider("values",1)+_+"</span>"),a.attr("href",r.replace("q=","q=miw_"+t.slider("values",0)+"+maw_"+t.slider("values",1)+"+"))}}),$(".widget_recent_product").length>0){var u=localStorage.getItem("kt-recent")||"";if(null!==localStorage.getItem("kt-recent")){var k=u.split(",").reverse();$(".widget_recent_product").show().attr("data-include",firstPrd+"?q="+k.join("+")+"&view=recently-sidebar").addClass("lazyload")}}if(o.length>0){$.each(f,function(e,l){if(0===l.indexOf("color-"))return $(".swatch-on-grid._"+l.replace("color-","")+" .swatch").trigger("click"),$(".swatch-on-grid._"+l.replace("color-","")+'[data-maybe-hide="true"]').attr("data-maybe-hide",!1),!0});var g="";$.each(o,function(e,l){g+='<li class="kt--fl-sl-i" style="margin-right: 0 !important;">',g+='<a data-pjax-filter href="'+l[1]+'"><span class="remove_kt--filter-sl" data-action="remove">'+l[0]+'<i class="fkt-close" aria-hidden="true"></i></span></a>',g+="</li>"}),$(".kt--fl-sl").html(g),$(".kt--filter-wrap-sl").removeClass("d-none"),$(".filter-clean.d-none, .sidebar-filter-clear.d-none").removeClass("d-none")}void 0!==typeof d&&_.forEach($("#sort_by a"),function(e,l){var t=$(e),i=t.attr("href").replace("?","");""!==c&&-1===c.indexOf("sort_by=")&&-1===c.indexOf(t.attr("href").replace("?",""))?t.attr("href",c+t.attr("href").replace("?","&")):""!==c&&-1!==c.indexOf("sort_by=")&&-1===c.indexOf(t.attr("href").replace("?",""))?t.attr("href",c.replace(d,i)):d==i&&t.attr("href",c)}),$("#filterApply").html($(".result-count").html()),$("#kt--filter-sl").html($(".kt--filter-wrap-sl").html()),$(s.filterGroup).find(".tagSelected").length>0?$("#filterClear").show():$("#filterClear").hide()},_checkCatShowing:function(){$(s.catShowing).length>0&&$(s.catShowing).parents("li.level-1").addClass("showAny")},onUnload:function(){this.$container.off(),$(".kt--filter-js").off()}}),e}();